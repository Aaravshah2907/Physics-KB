#!/bin/bash
# pkb-help: Displays usage examples and descriptions for all Physics KB scripts

# Colors
BLUE='\033[1;34m'
CYAN='\033[1;36m'
GREEN='\033[1;32m'
YELLOW='\033[1;33m'
RESET='\033[0m'
BOLD='\033[1m'

echo -e "${BLUE}Physics Knowledge Base - CLI Toolkit${RESET}"
echo -e "${BLUE}====================================${RESET}"
echo ""

# Helper function to print tool info
print_tool() {
    local name="$1"
    local desc="$2"
    local usage="$3"
    
    echo -e "${GREEN}‚Ä¢ $name${RESET}"
    echo -e "  ${CYAN}Desc:${RESET} $desc"
    echo -e "  ${YELLOW}Usage:${RESET} $usage"
    echo ""
}

echo -e "${BOLD}üîé Search & Indexing${RESET}"
print_tool "pkb-index" "Generates topic index (JSON/Markdown) & hierarchy." "pkb-index"
print_tool "pkb-search" "Interactive hierarchical search & file viewing." "pkb-search [query]"
print_tool "pkb-query" "CLI query tool for index stats & filtering." "pkb-query [stats|find|tag|complexity] [args]"

echo -e "${BOLD}üìù Content Creation${RESET}"
print_tool "pkb-gen" "Generates new notes from a topic. Supports --with-code (sim), --skip-check (speed), --tags \"[a, b]\"." "pkb-gen \"Concept\" [--with-code] [--skip-check] [--tags \"[tags]\"]"
print_tool "pkb-rebuild" "Restructures notes. Re-evaluates [Atomic Splitting] logic." "pkb-rebuild [filename]"
print_tool "pkb-refine" "Polishes notes. Supports --with-code for new simulations." "pkb-refine [filename] \"prompt\" [--with-code]"
print_tool "pkb-verify" "Technical audit for physical contradictions using Local LLM." "pkb-verify [filename]"
print_tool "pkb-batch" "Batch generation from a list. Runs in headless mode." "pkb-batch topics.txt"

echo -e "${BOLD}üõ†Ô∏è Maintenance & Quality${RESET}"
print_tool "pkb-audit" "Checks for broken links, syntax errors, etc." "pkb-audit"
print_tool "pkb-stats" "Shows KB health, complexity & growth stats." "pkb-stats"
print_tool "pkb-refresh" "Updates backlinks, images & formatting." "pkb-refresh [filename]"
print_tool "pkb-link-fixer" "Injects missing [[links]] across the KB." "pkb-link-fixer"
print_tool "pkb-todo" "Finds missing topics links. Use --update-only for background sync." "pkb-todo [--update-only]"

echo -e "${BOLD}üß™ Interactive Simulations${RESET}"
print_tool "pkb-lab" "Browse and run simulations interactively." "pkb-lab"

echo -e "${BOLD}üåê Connections, Media & Export${RESET}"
print_tool "pkb-bridge" "Finds hidden semantic connections between notes." "pkb-bridge"
print_tool "pkb-export" "Converts notes to LaTeX/PDF using Pandoc." "pkb-export"
print_tool "pkb-shot" "Captures screenshot to /assets/images & copies link." "pkb-shot"

echo -e "${BOLD}üè∑Ô∏è  Standard Taxonomy (Tags)${RESET}"
echo -e "  physics, mechanics, electromagnetism, optics, thermodynamics,"
echo -e "  quantum-mechanics, relativity, math, vector-calculus, tensors,"
echo -e "  theoretical-physics, analytical-mechanics, kinematics."
echo ""


echo -e "${BOLD}üí° Pro Tips${RESET}"
echo -e "  - Run ${CYAN}setup-global-scripts.sh${RESET} to add these to your PATH."
echo -e "  - ${YELLOW}Hybrid Backend:${RESET} These tools auto-fallback to Ollama (DeepSeek) if Gemini hits a rate limit."
echo -e "  - ${YELLOW}Token Saver:${RESET} Metadata tasks (titles/checks) run locally on Ollama to preserve your Gemini Pro quota."
echo -e "  - ${YELLOW}Templates:${RESET} Manual note template available in ${CYAN}/templates/physics-note-template.md${RESET}."
echo -e "  - Use ${CYAN}pkb-query stats${RESET} for a quick KB overview."
echo ""
